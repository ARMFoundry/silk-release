#!/bin/bash
set -e -u

ROOT_DIR_PATH=$(cd $(dirname $0)/.. && pwd)
cd $ROOT_DIR_PATH

if [ ${MYSQL:-"false"} = "true" ]; then
  docker run --privileged \
     --rm \
     -it \
     -v $PWD:/go/src/github.com/cloudfoundry-incubator/silk \
     -e GOPATH=/go \
     -e MYSQL=true \
     -w /go/src/github.com/cloudfoundry-incubator/silk \
     c2cnetworking/dev-mysql \
     /bin/bash
elif [ ${POSTGRES:-"false"} = "true" ]; then
  docker run --privileged \
     --rm \
     -it \
     -v $PWD:/go/src/github.com/cloudfoundry-incubator/silk \
     -e GOPATH=/go \
     -e POSTGRES=true \
     -w /go/src/github.com/cloudfoundry-incubator/silk \
     c2cnetworking/dev-postgres \
     /bin/bash
else
  docker run --privileged \
     --rm \
     -it \
     -v $PWD:/go/src/github.com/cloudfoundry-incubator/silk \
     -w /go/src/github.com/cloudfoundry-incubator/silk \
     golang \
     /bin/bash
fi
